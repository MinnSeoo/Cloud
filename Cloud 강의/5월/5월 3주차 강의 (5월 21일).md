# **5/21 강의 실습 내용정리**


이번강의에서 실습한 내용을 바탕으로 아래와 같은 아키텍처를 설계했다.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fabf3c3b-5b14-4d02-a5b4-cc42eb7f1952/Untitled.png)

설계한 아키텍처를 기반으로 서비스를 구축해 보겠다.

먼저 **VPC**를 생성해 준다.

 VPC 생성할때 subnet과 rtb 테이블 NAT gatway 등을 함께 만들 수 있는 옵션이 있지만 이번 실습에    서는 다 따로 생성해서 VPC에 연결해 주겠다.

- **이름 - testVPC**
- **CIDR - 192.168.0.0/16**

그 다음 **Subnet**을 생성해 준다. (Public 2개 Private 2개 → 총 4개)

- **VPC - 위에서 생성한 testVPC**
- **이름 - PublicSubnetA,B / PrivateSubnetA,B**
- **가용 영역 - 서브넷 이름에 맞게 선택 (ex - PublicSubnetA 이면 a 리전 선택)**
- **CIDR - 192.168.0.0/24(PublicA) / 192.168.1.0/24(PublicB) / 192.168.2.0/24(PrivateA) / 192.168.3.0/24(PrivateB)**

그 다음  **NAT 게이트웨이(NAT_GW)**를 생성해 준다.

- **이름 - A-NATGATE / B-NATGATE**
- **가용영역 - A는 a, B는 b**
- **Subnet - public a, b**
- **Elastic ip - a,b 2개 다 할당해 주기**

생성해 준 NAT GateWay는 **testVPC에 연결**시켜 준다.

그 다음 **IGW(인터넷 게이트워이)**를 생성해 준다.

- **이름 - testIGW**
- 

생성해 준 IGW는 **testVPC에 연결**시켜 준다.

그 다음 **라우팅 테이블**을 생성해 준다. ( Public 1개, Private 2개 → 총 3개)

- **이름 - PublicRTB /  PrivateRTB_A / PrivateRTB_B**
- **VPC - testVPC**

생성해 준 RTB의 규칙을 편집한다.

- PublicRTB의 target은 testIGW로 설정.
- PrivateRTB_A, B의 target은 NAT_GW A,B로 설정.

그 다음 **보안그룹**을 생성해 준다.

- 이름 - testSG
- VPC - testVPC
- Inbound Rule - Port 22(ssh), 80(Http) 열어주기 (이때 IPv4의 all Trapic을 허용한다.)
# **ALB 생성 방법**

**[ 기능 ]** - EC2 인스턴스 같은 여러 대상에 수신 애플리케이션 트래픽을 분산한다.

**[먼저 EC2 생성 후 셋팅🔽]**

1. 먼저 **Bastion EC2,** **application을 띄울 EC2**를 **생성** 해 준다.
   
   <br>

2. 생성한 EC2를 **터미널에서 접속(flask-application)** 해 주고 셋팅 해 준다.
    
    ➡️ 이때 파이썬 설치, 가상환경 셋팅, [app.py](http://app.py) 만들어 주기! (이전 내용 참고)

    <br>
    
3. 터미널 창을 하나 더 띄워서 **2번과 동일한 EC2에 접속**한다.

    <br>

4. 먼저 접속한 EC2에서 flask를 실행시켜준다.

    <br>

5. 나중에 접속한 EC2에서 명령어 입력 → **curl [http://localhost:5000](http://localhost:5000/)**

<br>

6. 이렇게 했을때 나중에 접속한 EC2 터미널에 Hello,world! 가 출력되는지
    
    확인 해 준다.
    

**[ALB 생성 🔽]**

1. EC2 서비스에서 왼쪽 스크롤 바에서 쭉 내리다 보면 로드밸런서가 있는데 
    
    로드밸런서를 선택해 준다.

    <br>
    
2. 로드밸런서 생성을 선택해 주고 로드 밸런서 유형을 선택 해 준다
    
    ➡️ ALB를 생성할 것이기 때문에 ALB 유형을 선택해 준다.

    <br>
    
3. 로드밸런스 구성을 해 준다.
    
    ➡️ 이름을 지정해 주고 리스너는 HTTP 80번 포트만 열어준다.
    
    ➡️ VPC와 가용 영역을 지정해 준다. (가용 영역 지정 할때 public subnet 선택해 주기!)

    <br>
    
4. 보안 그룹을 구성해 준다.
    
    ➡️ 이전에 만들어 두었던 보안그룹을 선택한다.
    
    ➡️ 리스너에서 프로토콜 HTTPS로 선택한다.

    <br>
    
5. 라우팅을  구성해 준다.
    
    ➡️ 대상 그룹을 선택 후 이름을 지정해 준다. (새 대상 구룹 선택)
    
    ➡️ 대상 유형은 인스턴스 선택
    
    ➡️ 프로토콜은 HTTP 80번 포트 선택

    <br>
    
6. flask application 이 돌아가는 인스턴스 대상으로 5천 포트를 지정해 주고 대상 그룹 생성.

    <br>

>    위 과정을 통해 ALB를 잘 생성 했다면 ALB의 DNS 이름을 웹 브라우저에 복붙했을때 Hello,World가 보이게 된다!  (안 보인다면 다시 생성하기..!)